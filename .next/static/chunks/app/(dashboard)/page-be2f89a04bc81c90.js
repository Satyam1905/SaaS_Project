(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{2940:function(e,t,a){Promise.resolve().then(a.bind(a,1061))},1061:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var s=a(7437),n=a(2265);function i(e){let{onNoteCreated:t}=e,[a,i]=(0,n.useState)(""),[r,o]=(0,n.useState)(""),[l,d]=(0,n.useState)(!1),[c,u]=(0,n.useState)(""),h=async e=>{e.preventDefault(),d(!0),u("");try{let e=localStorage.getItem("token"),s=await fetch("/api/notes",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({title:a,content:r})}),n=await s.json();n.success?(i(""),o(""),t()):u(n.error||"Failed to create note")}catch(e){u("Failed to create note")}finally{d(!1)}};return(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Create New Note"}),c&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:c}),(0,s.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,s.jsx)("input",{type:"text",id:"title",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:a,onChange:e=>i(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Content"}),(0,s.jsx)("textarea",{id:"content",rows:4,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:r,onChange:e=>o(e.target.value)})]}),(0,s.jsx)("button",{type:"submit",disabled:l,className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50",children:l?"Creating...":"Create Note"})]})]})}function r(e){let{notes:t,onNoteDeleted:a}=e,[i,r]=(0,n.useState)(null),o=async e=>{if(confirm("Are you sure you want to delete this note?")){r(e);try{let t=localStorage.getItem("token"),s=await fetch("/api/notes/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});(await s.json()).success?a(e):alert("Failed to delete note")}catch(e){alert("Failed to delete note")}finally{r(null)}}},l=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return 0===t.length?(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md text-center",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No notes yet. Create your first note!"})}):(0,s.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:e.title}),(0,s.jsx)("button",{onClick:()=>o(e.id),disabled:i===e.id,className:"text-red-600 hover:text-red-800 disabled:opacity-50",children:i===e.id?"Deleting...":"Delete"})]}),e.content&&(0,s.jsx)("p",{className:"text-gray-700 mb-4 whitespace-pre-wrap",children:e.content}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,s.jsxs)("p",{children:["Created by: ",e.author.email]}),(0,s.jsxs)("p",{children:["Created at: ",l(e.createdAt)]})]})]},e.id))})}function o(){let[e,t]=(0,n.useState)([]),[a,o]=(0,n.useState)(!0),[l,d]=(0,n.useState)(""),c=async()=>{try{let e=localStorage.getItem("token"),a=await fetch("/api/notes",{headers:{Authorization:"Bearer ".concat(e)}}),s=await a.json();s.success?t(s.data):d("Failed to fetch notes")}catch(e){d("Failed to fetch notes")}finally{o(!1)}};return((0,n.useEffect)(()=>{c()},[]),a)?(0,s.jsx)("div",{className:"p-8 flex justify-center",children:(0,s.jsx)("div",{className:"text-lg",children:"Loading..."})}):(0,s.jsx)("div",{className:"p-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"My Notes"}),l&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:l}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(r,{notes:e,onNoteDeleted:a=>{t(e.filter(e=>e.id!==a))}})}),(0,s.jsx)("div",{children:(0,s.jsx)(i,{onNoteCreated:()=>{c()}})})]})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=2940)}),_N_E=e.O()}]);